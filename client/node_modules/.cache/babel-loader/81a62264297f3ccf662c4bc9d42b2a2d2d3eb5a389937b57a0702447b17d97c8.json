{"ast":null,"code":"var _jsxFileName = \"/home/carruc/repos/heat-of-the-day-wip/client/src/components/EventCard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { X, Calendar, Clock } from 'lucide-react';\nimport './EventCard.css';\n\n// Implements requirement D6: Event creation card (replacing modal)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EventCard = ({\n  event,\n  projects,\n  onSave,\n  onClose,\n  position\n}) => {\n  _s();\n  const [formData, setFormData] = useState({\n    name: '',\n    projectId: '',\n    date: '',\n    time: '',\n    type: 'milestone'\n  });\n  const [errors, setErrors] = useState({});\n  const [dateInput, setDateInput] = useState(''); // For dd/mm/yy format\n  const cardRef = useRef(null);\n\n  // Initialize form data when editing\n  useEffect(() => {\n    if (event) {\n      const eventDate = new Date(event.date);\n      const dateValue = eventDate.toISOString().split('T')[0];\n      setFormData({\n        name: event.name,\n        projectId: event.projectId,\n        date: dateValue,\n        time: eventDate.toTimeString().slice(0, 5),\n        type: event.type\n      });\n      // Set date input to dd/mm/yy format\n      setDateInput(formatDateToShort(dateValue));\n    } else {\n      // Don't pre-fill with any date - leave empty for user input\n      setFormData(prev => ({\n        ...prev,\n        date: '',\n        time: '09:00',\n        // Only default the time\n        projectId: projects.length > 0 ? projects[0].id : ''\n      }));\n      // Clear date input\n      setDateInput('');\n    }\n  }, [event, projects]);\n\n  // Handle clicks outside the card to close it\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (cardRef.current && !cardRef.current.contains(event.target)) {\n        onClose();\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [onClose]);\n\n  // Handle escape key to close\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [onClose]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Clear errors when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: null\n      }));\n    }\n  };\n\n  // Handle date input in dd/mm/yy format\n  const handleDateInputChange = e => {\n    const value = e.target.value;\n    setDateInput(value);\n\n    // Try to parse the date\n    const parsedDate = parseDateInput(value);\n    if (parsedDate) {\n      setFormData(prev => ({\n        ...prev,\n        date: parsedDate\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        date: ''\n      }));\n    }\n\n    // Clear date error when user starts typing\n    if (errors.date) {\n      setErrors(prev => ({\n        ...prev,\n        date: null\n      }));\n    }\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.name.trim()) {\n      newErrors.name = 'Event name is required';\n    } else if (formData.name.trim().length < 2) {\n      newErrors.name = 'Event name must be at least 2 characters';\n    } else if (formData.name.trim().length > 100) {\n      newErrors.name = 'Event name must be less than 100 characters';\n    }\n    if (!formData.projectId) {\n      newErrors.projectId = 'Please select a project';\n    }\n    if (!formData.date) {\n      if (dateInput.trim()) {\n        newErrors.date = 'Please enter a valid date in dd/mm/yy format (e.g., 25/12/24)';\n      } else {\n        newErrors.date = 'Date is required';\n      }\n    } else {\n      const selectedDate = new Date(formData.date + 'T' + (formData.time || '00:00'));\n      const now = new Date();\n      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate()); // Start of today\n      const selectedDateOnly = new Date(selectedDate.getFullYear(), selectedDate.getMonth(), selectedDate.getDate());\n\n      // Check if date is in the past (implement R9.3)\n      if (selectedDate < now) {\n        newErrors.date = 'Date cannot be in the past';\n      }\n\n      // Additional validation for deadlines - must be today or after today\n      if (formData.type === 'deadline' && selectedDateOnly < today) {\n        newErrors.date = 'Deadlines must be set for today or a future date';\n      }\n    }\n    if (!formData.time) {\n      newErrors.time = 'Time is required';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (validateForm()) {\n      const eventDateTime = new Date(formData.date + 'T' + formData.time);\n      onSave({\n        name: formData.name.trim(),\n        projectId: formData.projectId,\n        date: eventDateTime.toISOString(),\n        type: formData.type\n      });\n    }\n  };\n\n  // Helper function to format date from YYYY-MM-DD to dd/mm/yy\n  const formatDateToShort = dateString => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    const day = date.getDate().toString().padStart(2, '0');\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const year = date.getFullYear().toString().slice(-2); // Last 2 digits\n    return `${day}/${month}/${year}`;\n  };\n\n  // Helper function to parse dd/mm/yy format\n  const parseDateInput = dateStr => {\n    const parts = dateStr.split(/[/.-]/);\n    if (parts.length === 3) {\n      const day = parseInt(parts[0], 10);\n      const month = parseInt(parts[1], 10);\n      let year = parseInt(parts[2], 10);\n\n      // Convert 2-digit year to 4-digit year\n      if (year >= 0 && year <= 30) {\n        year += 2000; // 00-30 -> 2000-2030\n      } else if (year >= 31 && year <= 99) {\n        year += 1900; // 31-99 -> 1931-1999\n      } else if (year >= 1900) {\n        // Already 4-digit year, keep as is\n      } else {\n        return null; // Invalid year\n      }\n      if (day >= 1 && day <= 31 && month >= 1 && month <= 12) {\n        // Convert to YYYY-MM-DD format for internal use\n        return `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;\n      }\n    }\n    return null;\n  };\n\n  // Handle key press for date input to prevent invalid characters\n  const handleDateKeyPress = e => {\n    // Allow backspace, delete, tab, escape, enter\n    if ([8, 9, 27, 13, 46].indexOf(e.keyCode) !== -1 ||\n    // Allow Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X\n    e.keyCode === 65 && e.ctrlKey === true || e.keyCode === 67 && e.ctrlKey === true || e.keyCode === 86 && e.ctrlKey === true || e.keyCode === 88 && e.ctrlKey === true) {\n      return;\n    }\n    // Ensure that it is a number or slash and stop the keypress\n    if ((e.shiftKey || e.keyCode < 48 || e.keyCode > 57) && (e.keyCode < 96 || e.keyCode > 105) && e.keyCode !== 191) {\n      e.preventDefault();\n    }\n  };\n\n  // Format date for display in DD/MM/YYYY format (4-digit year)\n  const formatDateLong = dateString => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    const day = date.getDate().toString().padStart(2, '0');\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const year = date.getFullYear();\n    return `${day}/${month}/${year}`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"event-card\",\n    ref: cardRef,\n    style: {\n      position: 'fixed',\n      left: (position === null || position === void 0 ? void 0 : position.x) || 0,\n      top: (position === null || position === void 0 ? void 0 : position.y) || 0,\n      zIndex: 1000\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"event-card-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: event ? 'Edit Event' : 'Create New Event'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-ghost btn-sm\",\n        onClick: onClose,\n        children: /*#__PURE__*/_jsxDEV(X, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"event-card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Event Type *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"event-type-selector-inline\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"radio-option-inline\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"type\",\n                value: \"milestone\",\n                checked: formData.type === 'milestone',\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"radio-label-inline\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"radio-icon milestone\",\n                  children: \"M\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 19\n                }, this), \"Milestone\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"radio-option-inline\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"type\",\n                value: \"deadline\",\n                checked: formData.type === 'deadline',\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"radio-label-inline\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"radio-icon deadline\",\n                  children: \"D\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 19\n                }, this), \"Deadline\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"eventProject\",\n            className: \"form-label\",\n            children: \"Project *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"eventProject\",\n            name: \"projectId\",\n            className: `input ${errors.projectId ? 'input-error' : ''}`,\n            value: formData.projectId,\n            onChange: handleInputChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select a project...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 15\n            }, this), projects.map(project => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: project.id,\n              children: project.name\n            }, project.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), errors.projectId && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-error\",\n            children: errors.projectId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"eventName\",\n            className: \"form-label\",\n            children: \"Event Name *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"eventName\",\n            name: \"name\",\n            type: \"text\",\n            className: `input ${errors.name ? 'input-error' : ''}`,\n            value: formData.name,\n            onChange: handleInputChange,\n            placeholder: `Enter ${formData.type} name...`,\n            autoFocus: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this), errors.name && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-error\",\n            children: errors.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Date and Time *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this), formData.type === 'deadline' && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 'var(--spacing-sm)',\n              padding: '6px',\n              backgroundColor: '#dbeafe',\n              border: '1px solid #3b82f6',\n              borderRadius: '4px',\n              fontSize: '0.75rem',\n              color: '#1e40af'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Deadline requirement:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 17\n            }, this), \" Must be set for today or a future date.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"datetime-inputs\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"date-input-group\",\n              children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                size: 16,\n                className: \"input-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"date\",\n                type: \"text\",\n                className: `input ${errors.date ? 'input-error' : ''}`,\n                value: dateInput,\n                onChange: handleDateInputChange,\n                onKeyDown: handleDateKeyPress,\n                placeholder: \"dd/mm/yy\",\n                title: \"Enter date in dd/mm/yy format (e.g., 25/12/24)\",\n                maxLength: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 17\n              }, this), formData.date && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"date-display\",\n                style: {\n                  fontSize: '0.75rem',\n                  color: 'var(--success-color)',\n                  marginLeft: '8px'\n                },\n                children: [\"\\u2713 \", formatDateLong(formData.date)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"time-input-group\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                size: 16,\n                className: \"input-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"time\",\n                type: \"time\",\n                className: `input ${errors.time ? 'input-error' : ''}`,\n                value: formData.time,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this), (errors.date || errors.time) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-error\",\n            children: errors.date || errors.time\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"event-card-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-secondary\",\n          onClick: onClose,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: event ? 'Update Event' : 'Create Event'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 243,\n    columnNumber: 5\n  }, this);\n};\n_s(EventCard, \"VjEJweDb8p/RgyK3J+G/OrQY8d0=\");\n_c = EventCard;\nexport default EventCard;\nvar _c;\n$RefreshReg$(_c, \"EventCard\");","map":{"version":3,"names":["React","useState","useEffect","useRef","X","Calendar","Clock","jsxDEV","_jsxDEV","EventCard","event","projects","onSave","onClose","position","_s","formData","setFormData","name","projectId","date","time","type","errors","setErrors","dateInput","setDateInput","cardRef","eventDate","Date","dateValue","toISOString","split","toTimeString","slice","formatDateToShort","prev","length","id","handleClickOutside","current","contains","target","document","addEventListener","removeEventListener","handleKeyDown","e","key","handleInputChange","value","handleDateInputChange","parsedDate","parseDateInput","validateForm","newErrors","trim","selectedDate","now","today","getFullYear","getMonth","getDate","selectedDateOnly","Object","keys","handleSubmit","preventDefault","eventDateTime","dateString","day","toString","padStart","month","year","dateStr","parts","parseInt","handleDateKeyPress","indexOf","keyCode","ctrlKey","shiftKey","formatDateLong","className","ref","style","left","x","top","y","zIndex","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","onSubmit","checked","onChange","htmlFor","map","project","placeholder","autoFocus","marginBottom","padding","backgroundColor","border","borderRadius","fontSize","color","onKeyDown","title","maxLength","marginLeft","_c","$RefreshReg$"],"sources":["/home/carruc/repos/heat-of-the-day-wip/client/src/components/EventCard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { X, Calendar, Clock } from 'lucide-react';\nimport './EventCard.css';\n\n// Implements requirement D6: Event creation card (replacing modal)\nconst EventCard = ({ event, projects, onSave, onClose, position }) => {\n  const [formData, setFormData] = useState({\n    name: '',\n    projectId: '',\n    date: '',\n    time: '',\n    type: 'milestone'\n  });\n  const [errors, setErrors] = useState({});\n  const [dateInput, setDateInput] = useState(''); // For dd/mm/yy format\n  const cardRef = useRef(null);\n\n  // Initialize form data when editing\n  useEffect(() => {\n    if (event) {\n      const eventDate = new Date(event.date);\n      const dateValue = eventDate.toISOString().split('T')[0];\n      setFormData({\n        name: event.name,\n        projectId: event.projectId,\n        date: dateValue,\n        time: eventDate.toTimeString().slice(0, 5),\n        type: event.type\n      });\n      // Set date input to dd/mm/yy format\n      setDateInput(formatDateToShort(dateValue));\n    } else {\n      // Don't pre-fill with any date - leave empty for user input\n      setFormData(prev => ({\n        ...prev,\n        date: '',\n        time: '09:00', // Only default the time\n        projectId: projects.length > 0 ? projects[0].id : ''\n      }));\n      // Clear date input\n      setDateInput('');\n    }\n  }, [event, projects]);\n\n  // Handle clicks outside the card to close it\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (cardRef.current && !cardRef.current.contains(event.target)) {\n        onClose();\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [onClose]);\n\n  // Handle escape key to close\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [onClose]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    // Clear errors when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: null\n      }));\n    }\n  };\n\n  // Handle date input in dd/mm/yy format\n  const handleDateInputChange = (e) => {\n    const value = e.target.value;\n    setDateInput(value);\n    \n    // Try to parse the date\n    const parsedDate = parseDateInput(value);\n    if (parsedDate) {\n      setFormData(prev => ({\n        ...prev,\n        date: parsedDate\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        date: ''\n      }));\n    }\n    \n    // Clear date error when user starts typing\n    if (errors.date) {\n      setErrors(prev => ({\n        ...prev,\n        date: null\n      }));\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    if (!formData.name.trim()) {\n      newErrors.name = 'Event name is required';\n    } else if (formData.name.trim().length < 2) {\n      newErrors.name = 'Event name must be at least 2 characters';\n    } else if (formData.name.trim().length > 100) {\n      newErrors.name = 'Event name must be less than 100 characters';\n    }\n\n    if (!formData.projectId) {\n      newErrors.projectId = 'Please select a project';\n    }\n\n    if (!formData.date) {\n      if (dateInput.trim()) {\n        newErrors.date = 'Please enter a valid date in dd/mm/yy format (e.g., 25/12/24)';\n      } else {\n        newErrors.date = 'Date is required';\n      }\n    } else {\n      const selectedDate = new Date(formData.date + 'T' + (formData.time || '00:00'));\n      const now = new Date();\n      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate()); // Start of today\n      const selectedDateOnly = new Date(selectedDate.getFullYear(), selectedDate.getMonth(), selectedDate.getDate());\n      \n      // Check if date is in the past (implement R9.3)\n      if (selectedDate < now) {\n        newErrors.date = 'Date cannot be in the past';\n      }\n      \n      // Additional validation for deadlines - must be today or after today\n      if (formData.type === 'deadline' && selectedDateOnly < today) {\n        newErrors.date = 'Deadlines must be set for today or a future date';\n      }\n    }\n\n    if (!formData.time) {\n      newErrors.time = 'Time is required';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    if (validateForm()) {\n      const eventDateTime = new Date(formData.date + 'T' + formData.time);\n      \n      onSave({\n        name: formData.name.trim(),\n        projectId: formData.projectId,\n        date: eventDateTime.toISOString(),\n        type: formData.type\n      });\n    }\n  };\n\n  // Helper function to format date from YYYY-MM-DD to dd/mm/yy\n  const formatDateToShort = (dateString) => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    const day = date.getDate().toString().padStart(2, '0');\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const year = date.getFullYear().toString().slice(-2); // Last 2 digits\n    return `${day}/${month}/${year}`;\n  };\n\n  // Helper function to parse dd/mm/yy format\n  const parseDateInput = (dateStr) => {\n    const parts = dateStr.split(/[/.-]/);\n    if (parts.length === 3) {\n      const day = parseInt(parts[0], 10);\n      const month = parseInt(parts[1], 10);\n      let year = parseInt(parts[2], 10);\n      \n      // Convert 2-digit year to 4-digit year\n      if (year >= 0 && year <= 30) {\n        year += 2000; // 00-30 -> 2000-2030\n      } else if (year >= 31 && year <= 99) {\n        year += 1900; // 31-99 -> 1931-1999\n      } else if (year >= 1900) {\n        // Already 4-digit year, keep as is\n      } else {\n        return null; // Invalid year\n      }\n      \n      if (day >= 1 && day <= 31 && month >= 1 && month <= 12) {\n        // Convert to YYYY-MM-DD format for internal use\n        return `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;\n      }\n    }\n    return null;\n  };\n\n  // Handle key press for date input to prevent invalid characters\n  const handleDateKeyPress = (e) => {\n    // Allow backspace, delete, tab, escape, enter\n    if ([8, 9, 27, 13, 46].indexOf(e.keyCode) !== -1 ||\n        // Allow Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X\n        (e.keyCode === 65 && e.ctrlKey === true) ||\n        (e.keyCode === 67 && e.ctrlKey === true) ||\n        (e.keyCode === 86 && e.ctrlKey === true) ||\n        (e.keyCode === 88 && e.ctrlKey === true)) {\n      return;\n    }\n    // Ensure that it is a number or slash and stop the keypress\n    if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105) && e.keyCode !== 191) {\n      e.preventDefault();\n    }\n  };\n\n  // Format date for display in DD/MM/YYYY format (4-digit year)\n  const formatDateLong = (dateString) => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    const day = date.getDate().toString().padStart(2, '0');\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const year = date.getFullYear();\n    return `${day}/${month}/${year}`;\n  };\n\n  return (\n    <div \n      className=\"event-card\"\n      ref={cardRef}\n      style={{\n        position: 'fixed',\n        left: position?.x || 0,\n        top: position?.y || 0,\n        zIndex: 1000\n      }}\n    >\n      <div className=\"event-card-header\">\n        <h3>{event ? 'Edit Event' : 'Create New Event'}</h3>\n        <button className=\"btn btn-ghost btn-sm\" onClick={onClose}>\n          <X size={16} />\n        </button>\n      </div>\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"event-card-body\">\n          {/* Event type selection */}\n          <div className=\"form-group\">\n            <label className=\"form-label\">Event Type *</label>\n            <div className=\"event-type-selector-inline\">\n              <label className=\"radio-option-inline\">\n                <input\n                  type=\"radio\"\n                  name=\"type\"\n                  value=\"milestone\"\n                  checked={formData.type === 'milestone'}\n                  onChange={handleInputChange}\n                />\n                <span className=\"radio-label-inline\">\n                  <span className=\"radio-icon milestone\">M</span>\n                  Milestone\n                </span>\n              </label>\n              \n              <label className=\"radio-option-inline\">\n                <input\n                  type=\"radio\"\n                  name=\"type\"\n                  value=\"deadline\"\n                  checked={formData.type === 'deadline'}\n                  onChange={handleInputChange}\n                />\n                <span className=\"radio-label-inline\">\n                  <span className=\"radio-icon deadline\">D</span>\n                  Deadline\n                </span>\n              </label>\n            </div>\n          </div>\n\n          {/* Project selection */}\n          <div className=\"form-group\">\n            <label htmlFor=\"eventProject\" className=\"form-label\">\n              Project *\n            </label>\n            <select\n              id=\"eventProject\"\n              name=\"projectId\"\n              className={`input ${errors.projectId ? 'input-error' : ''}`}\n              value={formData.projectId}\n              onChange={handleInputChange}\n            >\n              <option value=\"\">Select a project...</option>\n              {projects.map(project => (\n                <option key={project.id} value={project.id}>\n                  {project.name}\n                </option>\n              ))}\n            </select>\n            {errors.projectId && (\n              <div className=\"form-error\">{errors.projectId}</div>\n            )}\n          </div>\n\n          {/* Event name input */}\n          <div className=\"form-group\">\n            <label htmlFor=\"eventName\" className=\"form-label\">\n              Event Name *\n            </label>\n            <input\n              id=\"eventName\"\n              name=\"name\"\n              type=\"text\"\n              className={`input ${errors.name ? 'input-error' : ''}`}\n              value={formData.name}\n              onChange={handleInputChange}\n              placeholder={`Enter ${formData.type} name...`}\n              autoFocus\n            />\n            {errors.name && (\n              <div className=\"form-error\">{errors.name}</div>\n            )}\n          </div>\n\n          {/* Date and time inputs */}\n          <div className=\"form-group\">\n            <label className=\"form-label\">\n              Date and Time *\n            </label>\n            {formData.type === 'deadline' && (\n              <div style={{ marginBottom: 'var(--spacing-sm)', padding: '6px', backgroundColor: '#dbeafe', border: '1px solid #3b82f6', borderRadius: '4px', fontSize: '0.75rem', color: '#1e40af' }}>\n                <strong>Deadline requirement:</strong> Must be set for today or a future date.\n              </div>\n            )}\n            <div className=\"datetime-inputs\">\n              <div className=\"date-input-group\">\n                <Calendar size={16} className=\"input-icon\" />\n                <input\n                  name=\"date\"\n                  type=\"text\"\n                  className={`input ${errors.date ? 'input-error' : ''}`}\n                  value={dateInput}\n                  onChange={handleDateInputChange}\n                  onKeyDown={handleDateKeyPress}\n                  placeholder=\"dd/mm/yy\"\n                  title=\"Enter date in dd/mm/yy format (e.g., 25/12/24)\"\n                  maxLength={8}\n                />\n                {formData.date && (\n                  <span className=\"date-display\" style={{ fontSize: '0.75rem', color: 'var(--success-color)', marginLeft: '8px' }}>\n                    âœ“ {formatDateLong(formData.date)}\n                  </span>\n                )}\n              </div>\n              \n              <div className=\"time-input-group\">\n                <Clock size={16} className=\"input-icon\" />\n                <input\n                  name=\"time\"\n                  type=\"time\"\n                  className={`input ${errors.time ? 'input-error' : ''}`}\n                  value={formData.time}\n                  onChange={handleInputChange}\n                />\n              </div>\n            </div>\n            {(errors.date || errors.time) && (\n              <div className=\"form-error\">\n                {errors.date || errors.time}\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"event-card-footer\">\n          <button type=\"button\" className=\"btn btn-secondary\" onClick={onClose}>\n            Cancel\n          </button>\n          <button type=\"submit\" className=\"btn btn-primary\">\n            {event ? 'Update Event' : 'Create Event'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default EventCard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}